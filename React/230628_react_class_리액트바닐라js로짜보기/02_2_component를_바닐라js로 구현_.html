<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    
    <div id="root">

    </div>



</body>

    <script>
        // ì»´í¬ë„ŒíŠ¸ ê°€ì¥ ì–´ë ¤ìš¸ ê²ƒ 
        // ì»´í¬ë„ŒíŠ¸ ê¸°ëŠ¥
            // ì‚¬ìš©ì ui ì˜ ê¸°ë³¸ ë‹¨ìœ„
            // ì¬ì‚¬ìš©í•  ê²ƒ ê°™ì€ ì• ë“¤ì„ ë§Œë“ ë‹¤. 
            // ì¡°ê° ë§Œë“¤ê³  -> ì´ ì¡°ê°ì„ ë‹´ì„ ë¶€ëª¨ ë§Œë“¤ê³  -> ê°ìŒ€ ë¶€ëª¨ ë§Œë“¤ê³  ì™„ì„± 

        // ì»´í¬ë„ŒíŠ¸ ë€? 
            // ìì£¼ ì‚¬ìš©í•  ê²ƒ ê°™ì€ UI ìš”ì†Œë¥¼ ê¸°ë³¸ë‹¨ìœ„(ì¬ì‚¬ìš©ì„±)

            // ì»´í¬ë„ŒíŠ¸ëŠ” 'ìƒíƒœ' ì™€ 'ì†ì„±' ì„ ê°–ê³  ìˆìŒ. 
            // 'ì†ì„±' ì€ Props ë¼ëŠ”ê²Œ ìˆìŒ.
            // react ëŠ” ë°ì´í„° íë¦„ì´ 'ë‹¨ë°©í–¥ì„±' ì„. 

            // ë¶€ëª¨ì—ì„œ ìì‹ìœ¼ë¡œ ê°’ì„ ì „ë‹¬í•  ìˆ˜ ìˆìŒ. 
            // ìì‹ì—ì„œ ë¶€ëª¨ì—ê²Œ ê°’ì„ ì „ë‹¬í•  ìˆ˜ ì—†ìŒ.


        // class 
            // ì»´í¬ë„ŒíŠ¸ í´ë˜ìŠ¤ 

            // component ëŠ” component ì˜ ëª¨ì–‘ì„ ë§Œë“¤ ê²ƒ ì„. 
            // ì´ê±¸ ìƒì† ë°›ì•„ì„œ ì‚¬ìš©í•  ê²ƒ ì„. 

            class Component {
                target;
                state;  // ìƒíƒœê°’ ì»´í¬ë„ŒíŠ¸ì˜ ìœ ì§€ë˜ëŠ” ë°ì´í„° | ì»´í¬ë„ŒíŠ¸ì˜ ìƒíƒœê°’

                constructor (target) {
                    // ì»´í¬ë„ŒíŠ¸ì˜ target ì„ ì„¤ì •
                    this.target = target;
                    this.setup();
                    this.render();
                    console.log("ë‚˜ëŠ” ìµœì´ˆì— render ë˜ì—ˆì§€ğŸ’ª")
                }

                // ì´ˆê¸° ì„¤ì • í•¨ìˆ˜
                setup(){
                    // ì»´í¬ë„ŒíŠ¸ë¥¼ ì´ˆê¸° ì„¤ì • ë Œë”ë§ í•˜ê¸° ì „ì— ë™ì‘í•˜ëŠ” í•¨ìˆ˜.
                    console.log("component ì´ˆê¸° ì…‹íŒ…")
                }

                template(){
                    // ì»´í¬ë„ŒíŠ¸ HTML í…œí”Œë¦¿ì„ ë°˜í™˜í•´ì¤„ ê²ƒ ì„. 
                    // í˜ì´ì§€ì— ê·¸ë¦´ HTML 
                    return "";
                }

                render(){
                    // ì»´í¬ë„ŒíŠ¸ë¥¼ íƒ€ê²Ÿ ìš”ì†Œì— ë Œë”ë§
                    this.target.innerHTML = this.template();

                    this.setEvent();
                    
                }

                setEvent() {
                    // ì»´í¬ë„ŒíŠ¸ ì´ë²¤íŠ¸ ì…‹íŒ… 
                    console.log("ì»´í¬ë„ŒíŠ¸ ì´ë²¤íŠ¸ ì…‹íŒ…");
                }

                setState(_state) {
                    // ì»´í¬ë„ŒíŠ¸ì˜ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸
                    // ì—…ë°ì´íŠ¸ ë˜ë©´ -> ë¦¬ë Œë”ë§(rerendering)

                    this.state = {...this.state, ..._state};
                        // ì—¬ê¸°ì—ì„œ this ëŠ” ì•ìœ¼ë¡œ ë§Œë“¤ì–´ì§ˆ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê°€ë¦¬í‚´
                    this.render();

                    console.log("ë‚˜ ìƒíƒœ ë°”ë€œ");
                }
        }

        // ê°€ìƒ DOM í´ë˜ìŠ¤ ì •ì˜ 
        // ë Œë”ë§ ì‹œí‚¬ ê²ƒ ì„
            class VirtualDOM {
                constructor (component , target) {
                    // ì»´í¬ë„ŒíŠ¸ ë„˜ê²¨ë°›ëŠ”, ë§¤ê°œë³€ìˆ˜ë¡œ ì „ë‹¬ë°›ì€ ì»´í¬ë„ŒíŠ¸ ìƒì„± í›„, íƒ€ê²Ÿ ìš”ì†Œ ì „ë‹¬!
                    // ì»´í¬ë„ŒíŠ¸ í´ë˜ìŠ¤ ìƒì„±ì í•¨ìˆ˜ì˜ ë§¤ê°œë³€ìˆ˜ë¡œ íƒ€ê²Ÿ ì „ë‹¬.
                    this.Component = new component(target);
                }
                // ì´ ë¶€ë¶„ì´ ë³µì œ DOM ì„ ë§Œë“œëŠ” ê³³? â“â“â“ 

                render() {
                    // ì»´í¬ë„ŒíŠ¸ ë Œë”ë§ 
                    this.Component.template();
                }
            }


        // app class ì»´í¬ë„ŒíŠ¸ë¥¼ ìƒì†ë°›ì•„ì„œ ë§Œë“¤ì–´ë³¼ ê²ƒ ì„. 
        class App extends Component {

            // ì´ˆê¸° ì…‹íŒ…
            setup() {
                // App ì˜ ì»´í¬ë„ŒíŠ¸ ì´ˆê¸° ì…‹íŒ… í•¨ìˆ˜
                this.state = { items : ["ì•„ì´í…œ 1" , "ì•„ì´í…œ2"] };
                    // [ê¶ê¸ˆí•œ ì ]  
                        // ì—¬ê¸°ì—ì„œ this ëŠ” Component ë¥¼ ê°€ë¦¬í‚¤ë‚˜? 
            }

            // html ë¦¬í„´
            template() {
                // App ì»´í¬ë„ŒíŠ¸ì˜ HTML ì„ ìƒì„±í•´ì„œ ë°˜í™˜
                const { items } = this.state;
                return `
                    <ul> 
                        ${items.map((item) => `<li> ${item} </li>` )}
                    </ul>
                    <button>ì¶”ê°€</button>
                `
                // {items.map((item) => {`<li> ${item} </li>` })} ì—¬ê¸°ì—ì„œ, {} í™”ì‚´í‘œ í•¨ìˆ˜ ë‹¤ìŒ {} ì´ê±¸ ì“°ë©´ => return ì´ ë‚˜ì˜¤ê²Œ ë¨. 
            }

            setEvent() {
                // App ì»´í¬ë„ŒíŠ¸
                this.target.querySelector('button').addEventListener('click' , () => {
                    
                    const {items} = this.state;
                    this.setState({items : [...items, `ì•„ì´í…œ ${items.length + 1}`]});    // ìƒíƒœë³€ê²½í•  ë•ŒëŠ” setState

                })
                this.target.query

            }
        }
        
        // í´ë˜ìŠ¤ë¥¼ ë™ì í• ë‹¹í•´ì„œ ì“°ê¸°! 

        // root ëŠ” ì„ íƒìë¡œ í•œë²ˆë§Œ ì¡ëŠ”ë‹¤. 
        const root = new VirtualDOM(App, document.querySelector('#root'))
            
        // root
        root.render();



    </script>





</html>