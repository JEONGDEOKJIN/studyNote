<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <!-- axios 로 예전에 쓰던 form 태그 대신 전송⭐⭐⭐ -->
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>

</head>
<body>
    
    <!-- <form action="">
        <input type="text" name="name">
    </form> -->

    <input type="text" id="imgs">

    <input type="file" id="file">
    <button id="uploadBtn">전송</button>

    <!-- 이건 임의로 적은거임 😥😥😥😥😥 -->
    <img src="http://localhost:8002/img/ad5191be-fea8-4398-b6a9-2d7e86c0e77c_1685421564518.jpg" alt="">
        <!-- ✅ 이건, 파일이 올라가면, 복붙해서 넣게 됨  -->

        <!-- imp 로 요청을 보내면 upload 까지 들어가고 > img 이름만 들어가면 > 서버에 있는 이미지를 가져와서 프론트에 보여주는 것 ⭐⭐⭐ -->

        <!-- 1) 파일 저장 2) 업로드에 가져오고 3) 프론트에서 src 로 불러오면 > 볼 수 있어?  -->
        <!-- 폴더에 이미지 업로드 하고 > 폴더 타고 들어가면 > 이미지가 보일 수 있게 된 것  -->

        <!-- https://s.pstatic.net/shopping.phinf/20230523_4/4e15cf13-dce3-448d-96af-55ddd98f75b5.jpg?type=f500
                서버 컴터에 이미지가 있는 상태임
            
            backEnd - uploads 에 이미지 저장하고 > 이미지 경로를 설정 -->



</body>

    <script>

        // form 데이터를 동적으로 만들어서 > axios 로 보내기 
        uploadBtn.onclick = () => {
            // form 데이터를 동적으로 만들어서, 폼의 데이터 형식으로 보내자
            // 자바스크립트, 내장 객체를 쓸 것 임
            // new FormData : form 데이터를 동적으로 생성 
            const form = new FormData();
            
            // html 상에서 name으로 키 값을 전달하던 부분 
            // append 메서드로 설정. 
            // 첫 번째 매개변수 가 키 
            // 두 번째 매개변수가 값
            // form.append("name"  , input01.value);
                form.append("imgs" , imgs.value);

            // 인풋에 파일 내용을 어떻게 가져오나
                console.log(file.files[0])
                // input 에 들어있는 파일 내용을 볼 수 있다. ❓❓❓❓❓❓❓❓❓❓❓❓❓❓❓
                
                form.append("upload" , file.files[0]); 
                    // file 은 input 태그에 담긴 file 의 내용

            // axios 로 전송 
                axios.post("http://127.0.0.1:8002/upload" , form , {
                    // 전달할 데이터 form 을 적는다.
                    // 보낼 때, 파일이 포함되어 있으면, 파일이 폼데이터로 전송한다고 설정
                    // 헤더의 내용으로, 인코딩된, 폼 데이터로 전송한다고 설정
                    "Content-Type" : "multipart/form-data" 
                        // 인코딩된 폼 데이터를 헤더의 내용을 포함해서 전송}
                }).then( (e)=> {
                    console.log("잘 전달됨")
                    console.log(e.data)
                }).catch((err) => {
                    console.log(err)
                })

        }

    </script>





</html>