<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <!-- â­â­ axios â­â­ -->
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>

</head>
<body>

    <div>
        <span> ì´ë¦„ : </span>
        <span id="user_name"> </span>
        <!-- [í•´ì„]
                - spanì´ inline block ì¸ê°€? ê·¸ë˜ì„œ ì˜†ì— ë¶™ìœ¼ë ¤ë‚˜? 
                - 'ë°ì´í„°ë¥¼ ë„£ì–´ì¤„ ë¶€ë¶„' ì— ì–´ë–¤ ì²˜ë¦¬ë¥¼ í•˜ëŠ”ê°€! â­â­â­â­â­
                    - ì—¬ê¸°ì—ì„œëŠ” â­â­â­ ì´ 3ë‹¨ê³„ë¥¼ ì˜ í™•ì¸í•´ë³´ì  
                        1) í•´ë‹¹ íƒœê·¸ë¥¼ ë¹„ìš°ê³  
                        2) í•´ë‹¹ íƒœê·¸ì— id ë¥¼ ê¸°ì…í•´ì„œ, js ì—ì„œ ë°”ë¡œ ë³€ìˆ˜ë¡œ ì“¸ ìˆ˜ ìˆê²Œ í•˜ê³  
                        3) innerHTML ë¡œ ì±„ìš´ë‹¤. â­â­â­â­ 
            -->
    </div>

    <ul>
        <li id="msg_list">  
            
        </li>
    </ul>
    
    <!-- <form action="/board/mainView" method="get"> -->
        <a href="http://127.0.0.1:5500/frontEnd/board.html">
            <button>ì „ì²´ ê²Œì‹œê¸€ë¡œ ì´ë™ğŸ™Œ</button>
        </a>

</body>

<script>    
    async function getAPI() {
        try {            
            // 1. data ê°€ì ¸ì˜¤ê¸° from sql 
                // âœ… http://127.0.0.1:8007/board/view/${id} ì—¬ê¸°ë¡œ ìš”ì²­ ë³´ë‚´ëŠ” ê±´, ì‚­ì œ
            const {data} = await axios.get('http://127.0.0.1:8007/board/mypage/view' , {
                withCredentials : true
            });

            console.log(" ğŸ”®ğŸ”®ğŸ”®ğŸ”®ğŸ”®ğŸ”®ğŸ”®ğŸ”®ğŸ”®ğŸ”®ğŸ”®ğŸ”®ğŸ”®ğŸ”®ğŸ”® " , data)

            // innerHTML ë¶™ì´ê¸°
                // name 
                user_name.innerHTML = data.name

                // í¬ìŠ¤íŒ…ë“¤
                const userPosts = data.Posts
                    // console.log(userPosts[0].msg)
                    // console.log(userPosts[1].msg)

                let userMsg = userPosts.map( (el) => {
                    return `
                    <li> ${el.msg}
                    </li>
                    `
                })

                msg_list.innerHTML += userMsg

        } catch (error) {
            console.log(error)
        }

    }

    getAPI();


    // ê¶ê¸ˆí•œê±° ì ì€ê±° ëª¨ìŒ 
        // [ì§ˆë¬¸ or ì• ë§¤í•œ ê²ƒ]
            // http://127.0.0.1:8007 ì´ê±´ ì–´ë””ì—ì„œ ì„¤ì •? 
            // ë„ë©”ì¸ ë’¤ì— ê²½ë¡œëŠ” ì–´ë–»ê²Œ ì¤˜ì•¼ í• ê¹Œ? â­â­â­ 
                // ë¼ìš°í„° ì…ì¥ì—ì„œ res.json(data) ë¡œ ì—°ê²°ë  ìˆ˜ ìˆëŠ”, ê²½ë¡œì—¬ì•¼ ê² ì§€.  
            // :id ì´ë ‡ê²Œ ì‘ì„±í•˜ë©´, ê·¸ ì•„ì´ë””ê°€ ì°í˜€ì„œ ë³´ë‚´ì§ˆê¹Œ? â­â­â­ 
                // ë³´ë‚´ì§€ëŠ” ê²ƒë“¤ì€ ì–´ë–¤ ì›ë¦¬ì¸ë°? 
                    // ê²½ë¡œì—ì„œ place holder ì´ê³ , ìš°ì„ , ë³€ìˆ˜ ê°™ì€ ê±°ì•¼ 
                    // ì´ ê°’ë“¤ì€ ì–¸ì œ ì±„ì›Œì ¸? 

        // 2. data ê°€ ì–´ë–»ê²Œ ë“¤ì–´ì˜¤ëŠ”ì§€ ë³´ê³ , ì–´ë–¤ ì‹ìœ¼ë¡œ ê½‚ì•„ì¤˜ì•¼ í• ì§€ ê³ ë¯¼ 
            // controllers > exports.viewUser ë³´ë‹ˆê¹Œ, User í…Œì´ë¸”ì— ìš”ì²­í•˜ê³  ìˆìŒ. 
            // ê·¸ëŸ°ë° ì§€ê¸ˆì€ ê²Œì‹œê¸€ì„ ë³´ì—¬ì¤˜ì•¼ í•˜ë‹ˆê¹Œ, Posts í…Œì´ë¸”ë¡œ ì„¤ì •í•˜ëŠ”ê²Œ ë§ìŒ. 
            // Posts í…Œì´ë¸”ì—ì„œ í•„ìš”í•œ ë°ì´í„° ì»¬ëŸ¼ì€? (ì´ ìˆœê°„, sql ì„ í™•ì¸í•´ë³´ì) 
                // 1) foreign key ì¸ user_id  
                // 2) msg 
            // ì´ê±¸ ì–´ë–»ê²Œ íŒŒê³  ë“¤ì–´ì•¼ ì›í•˜ëŠ” ê±¸ ê°€ì ¸ì˜¬ ìˆ˜ ìˆëŠ”ì§€ ë³´ì.
                // ì´ ìˆœê°„, 'ì•Œê³ ë¦¬ì¦˜' ì´ ì‚¬ìš©ë  ê²ƒ ê°™ë‹¤ëŠ” ìƒê°ì´ ë“ ë‹¤. 


        // ì•„, ë‚´ê°€ êµ‰ì¥íˆ ì˜¤í•´í•œê²Œ ìˆëŠ”ë° post í…Œì´ë¸” ì¡°íšŒê°€ ì•„ë‹ˆë¼, user í…Œì´ë¸” ì¡°íšŒê°€ ë§ìŒâ­â­â­â­â­ 
        // 1) User í…Œì´ë¸”ì˜ ë°ì´í„°ë¥¼ ì¡°íšŒí•˜ê³  Post ì˜ ë°ì´í„°ë¥¼ include ì— ë„£ì–´ì„œ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤ëŠ” ê²ƒ 
        // 2) ê·¸ëŸ¬ë©´, í•´ë‹¹ id ì— í•´ë‹¹í•˜ëŠ” post ë°ì´í„°ê°€ record ë¡œ ë“¤ì–´ì˜¨ ë‹¤ëŠ” ê²ƒ â­â­â­â­â­ 
        // 3) ê·¸ë˜ì„œ, 'í•´ë‹¹ id ë¡œ ì‘ì„±ëœ ê¸€ì„ ë‹¤ ê¸ì–´ì˜¤ê³  ì‹¶ë‹¤.' ë¼ë©´, 
            // > post table ì—ì„œ 1) foreignKey ìƒì„±ë˜ê²Œ í•˜ê³  2) â­â­â­ ë°ì´í„°ë² ì´ìŠ¤ ìì²´ì—ì„œâ­â­â­ ì†ì•„ì„œ ê°€ì ¸ì˜¨ë‹¤.
            // ì¤‘ìš”í•œ ì ì€ 
                // a) 'ë³´ì—¬ì£¼ê³  ì‹¶ì€ ê±´ == ê²Œì‹œê¸€' ì´ë¼ê³  í•´ì„œ post í…Œì´ë¸”ì„ í˜¸ì¶œí•˜ë©´ ì•ˆ ëœë‹¤ëŠ” ê²ƒ 
                // b) 'í•´ë‹¹ id ì— ì†í•˜ëŠ” ê²Œì‹œê¸€' ë§Œ ê°€ì ¸ì˜¤ê³  ì‹¶ì€ ê²ƒ ì´ë¯€ë¡œ, 'â­â­í•„í„°ë§ ëœâ­â­ post ë°ì´í„°' ë¥¼ ê°€ì ¸ì™€ì•¼ í•œë‹¤ëŠ” ê²ƒ 
                // ê·¸ëŸ¬ë ¤ë©´, 'â­â­ í•„í„°ë§ì˜ ê¸°ì¤€ì´ ë˜ëŠ” ID ê°€ ì†í•´ ìˆëŠ” User í…Œì´ë¸”' ì„ ê¸°ì¤€ìœ¼ë¡œ sql ì„ ë¶€ë¥´ê³ â­â­ 
                // d) associate ì˜ íš¨ê³¼ë¡œ, â­â­ ë”¸ë ¤ì˜¤ëŠ” post ë°ì´í„°â­â­ ë¥¼ ê°–ì˜¤ë©´, ìì—°ìŠ¤ëŸ½ê²Œ, 'í•„í„°ë§ëœ post ë°ì´í„°' ê°€ ë‚˜ì˜¤ê²Œ ëœë‹¤. 

                // ê·¸ëŸ¬ë©´, í•„ìš”í•œ ë°ì´í„° ì°¾ì•„ë³´ê¸° 
                    // 1) ìœ ì € ë„¤ì„ 
                        // console.log("ìœ ì € name : " , data.name);

                    // 2) ë©”ì‹œì§€ 
                        // console.log("ê²Œì‹œê¸€ : " , data.Posts[0].msg)
                        // console.log("ê²Œì‹œê¸€ : " , data.Posts[1].msg)
                        // console.log("ê²Œì‹œê¸€ : " , data.Posts[2].msg)


            // 3. html íƒœê·¸ì— innerHTML ë¡œ ê½‚ì•„ì£¼ê¸° (ë°˜ë³µë¬¸ ì–´ë–»ê²Œ?)
                // user_name.innerHTML = data.name;
                // // msg_list.innerHTML = data.Posts[2].msg;
                
                // data.Posts.forEach((el) => {
                //     msg_list.innerHTML += ` 
                //     <li> ${el.msg} </li>
                //     `                    
                // });


</script>

</html>
