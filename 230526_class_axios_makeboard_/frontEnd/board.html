<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <!-- axios ì„¤ì¹˜ -->
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>

</head>
<body>

    ê²Œì‹œíŒ 

    <ul>
        <li id="post_list">
            <!-- <p> name : <span id="user_name"> </span> </p>
            <p> ì‘ì„± ë‚´ìš© <span id="msg"> </span></p> -->
        </li>
        
    </ul>


</body>

<script>

    async function getAPI() {
        try {
            const {data} = await axios.get('http://127.0.0.1:8007/board/mainView' , {
                withCredentials : true
            }) 
                // [í•´ì„]
                    // í´ë¼ì´ì–¸íŠ¸ì—ì„œ ìš”ì²­ì„ í•  ë•ŒëŠ”, ë‚´ê°€ node.js ë¥¼ í‹€ì–´ì„œ ë“¤ì–´ê°€ëŠ” ê±°ë‹ˆê¹Œ, ë…¸ë“œ js ì˜ ì„œë²„ í¬íŠ¸ì¸ 8007 ì„ ë„£ëŠ”ë‹¤.
                // [ëª¨ë¥´ê² ëŠ” ê²ƒğŸ“›]
                    // í˜„ì¬ port ë²ˆí˜¸ê°€  8007 ì¸ ì´ìœ ëŠ”, node.js ì—ì„œ 8007 ì„œë²„ë¥¼ ì—´ê³  > ì ‘ì†í–ˆê¸° ë•Œë¬¸?
                    // http://127.0.0.1 ì´ë ‡ê²Œ ë„ë©”ì¸ì´ ì •í•´ì§„ ê±´ ë¬´ì—‡ ë•Œë¬¸? 
                // [í•´ì„] 
                    // í•´ë‹¹ ê²½ë¡œì— ëŒ€í•´ì„œ, ë°ì´í„°ë¥¼ ë‹¬ë¼ê³  ìš”ì²­
                    // ì € ê²½ë¡œëŠ” ë§Œë“¤ì–´ì¤€ ì ì´ ì—†ëŠ”ë°, ì§€ê¸ˆ ì²˜ìŒ ë§Œë“ ê±´ë°, ì–´ë–»ê²Œ ê°€ëŠ¥í•˜ì§€?
                        // ì € ê²½ë¡œì— ëŒ€í•´, router ê°€ ë¶™ê³  > controller ë¥¼ ì—°ê²°í•˜ê³  > controller ê¸°ëŠ¥ì„ ë¶™ì—¬ì„œ
                        // í•´ë‹¹ controller ì—ëŠ” 1) res.json ìœ¼ë¡œ ë°ì´í„° ë³´ë‚´ê³  2) redirect ë¡œ board.html í•˜ë©´ ëœë‹¤.
                            // ì´ ë¶€ë¶„ì´ ì¡°ê¸ˆ ê²¹ì¹  ê²ƒ ê°™ê¸°ë„ í•œë°
            
            console.log("ğŸ™†â€â™‚ï¸ğŸ™†â€â™‚ï¸ğŸ™†â€â™‚ï¸ğŸ™†â€â™‚ï¸ğŸ™†â€â™‚ï¸ ì–´ë–»ê²Œ ë“¤ì–´ì˜¤ëŠ”ì§€ í™•ì¸" , data)

            const posts = data;

            // ì´ë ‡ê²Œ ì§œëŠ”ê±°, gpt ê°€ í•´ì¤Œ | ğŸ˜¥ğŸ˜¥ğŸ˜¥ | ë°°ì›€ì˜ ê¸°íšŒë¼ê³  ìƒê°í•˜ê³  ë°°ìš°ë©´ ëœë‹¤. ê´œì°®ì•„.
            let postHTML = posts.map( (el) => {
                let messages = el.msg.map(msg => `<p> ì‘ì„±ë‚´ìš© : ${msg} </p>`).join('');
                return `
                    <li>
                        <p> name : ${el.name} </p>
                        ${messages}
                    </li>
                `;
            }).join('');


            post_list.innerHTML += postHTML;


        } catch (error) {
            console.log(error)
        }
    }

// async function getAPI() {
//     try {
//         const {data} = await axios.get('http://127.0.0.1:8007/board/mainView' , {
//             withCredentials : true
//         });

//         console.log("ğŸ™†â€â™‚ï¸ğŸ™†â€â™‚ï¸ğŸ™†â€â™‚ï¸ğŸ™†â€â™‚ï¸ğŸ™†â€â™‚ï¸ ì–´ë–»ê²Œ ë“¤ì–´ì˜¤ëŠ”ì§€ í™•ì¸" , data)

//         const posts = data;

//         let postHTML = posts.map( (el) => `
//             <li>
//                 <p> name : ${el.name} </p>
//                 <p> ì‘ì„±ë‚´ìš© : ${el.msg} </p>
//             </li>
//         `).join('');

//         document.getElementById("post_list").innerHTML += postHTML;

//     } catch (error) {
//         console.log(error)
//     }
// }


    getAPI()


</script>




</html>