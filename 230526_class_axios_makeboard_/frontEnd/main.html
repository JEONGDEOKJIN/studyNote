<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <!-- axios â­â­â­â­â­â­â­â­â­â­  -->
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <!-- ìš”ì²­ì´ ì™¸ë¶€ë¡œ ê°€ê³  > ê°”ë‹¤ê°€ ë“¤ì–´ì˜¤ë©´, ì»´í„°ëŠ” ì™¸ë¶€ê±¸ë¡œ ì¸ì‹ -> ê·¸ë˜ì„œ cors í…ŒìŠ¤íŠ¸ë¥¼ í•  ìˆ˜ ìˆìŒ. -->
    <!-- ê·¼ë° axios ëŠ” cors ë¥¼ ëš«ê³  ê°„ë‹¤.  -->

    <!-- ì¦‰, cors ëŠ” ì™¸ë¶€ì ‘ì†ì„ ì œì–´í•˜ê¸° ìœ„í•œ ê²ƒ, 
        ë‚˜ í˜¼ìëŠ” ì•ˆ ë˜ë‹ˆê°€, axios ë¥¼ ê°€ì ¸ì˜¨ê±´ë°, 
        axio ê°€ ê·¼ë° cors ë¥¼ ëš«ì—ˆì–´ 
        ê·¸ë¦¬ê³ , cors ì—ì„œ 8000 ë²ˆëŒ€ë§Œ ë“¤ì–´ì˜¬ ìˆ˜ ìˆê²Œ í–ˆëŠ”ë°, ìê°€ ì ‘ì†(ë‚´ê°€ ë‚´ ì»´í„°ì—ì„œ í•˜ëŠ”ê±°)ì€ 
        ë˜ ì´ê±° ëš«ì—ˆì–´ 
    -->

</head>

<style>
    #isLoading{
        background-color: white;
        width: 100%;
        height: 100%;
        position: fixed;
        top: 0;
        left: 0;
        display: flex;
        justify-content: center;
        align-items: center;
    }

    #isLoading img {
        width: 300px;
            /* height ì•ˆ ì£¼ë©´, ë¹„ìœ¨ëŒ€ë¡œ ì»¤ì§ */
    }

    #isLoading.disable {
        display: none;
    }

</style>

<body>

    <div id="isLoading">
        <img src="./img/loadingGIF.gif" alt="">
    </div>

    <div>
        <div>
            <span>ì´ë¦„ : </span>
            <span id="user_name"></span>
            <!-- ë¸”ë¡ ë¸”ë¡ > span ì´ë¼ì„œ, ì˜†ì— ë¶™ì„ ê²ƒ ì„! -->
        </div>

        <div>
            <span>ë‚˜ì´</span>
            <span id="user_age"></span>
        </div>

    </div>

    <a href="./create.html"> ê²Œì‹œê¸€ ì‘ì„±í•˜ëŸ¬ ê°€ê¸° </a> <br>

    <a href="./mypage.html"> ë§ˆì´ í˜ì´ì§€ ê°€ê¸° </a> <br>


    <!-- board ë¡œ ë¼ìš°íŒ… ì‹œí‚¤ëŠ”ê²Œ ë‚˜ì„ì§€, signup ìœ¼ë¡œ ë¼ìš°íŒ… ì‹œí‚¤ëŠ”ê²Œ ë‚˜ì„ì§€ ì˜ ëª¨ë¥´ê² ìŒ -->
    <!-- <form action="http://127.0.0.1:8007/board/mypage/:id" method="get">
        <button>
            ë§ˆì´í˜ì´ì§€ ê°€ê¸°
        </button>
    </form> -->
        <!-- ê²Œì‹œê¸€ ì‘ì„±ê³¼ ë‹¤ë¥´ê²Œ, ë§ˆì´í˜ì´ì§€ëŠ” placeholder ë¥¼ í•˜ëŠ” ì´ìœ ëŠ”? 
            1) ì§€ê¸ˆ ë¡œê·¸ì¸ í•œ ìœ ì €ì˜ id ë¥¼ ê¸°ì–µí•´ì•¼ í•˜ê¸° ë•Œë¬¸ì— 
            2) ê²Œì‹œê¸€ ì‘ì„±í•˜ëŸ¬ ê°€ê¸°ì—ëŠ” id ë¥¼ ê¸°ì–µí•  ìˆ˜ ìˆëŠ” ë°©ë²•ì´ ìˆëƒëŠ” ê±°ì§€ 
            3) ì•„ì§ ìƒê°ë‚˜ëŠ” ë°”ê°€ ì—†ìœ¼ë‹ˆê¹Œ, ìš°ì„ , placeholder ë¡œ í•´ë³´ì
            4) ìŒ... ê·¼ë° ë°©ì‹ì´ ìˆì§€ ì•Šì„ê¹Œ ?
        -->


</body>


<script>

    // â­â­ async ë¥¼ ì“´ë‹¤ == ì™„ë£Œ ë  ë•Œ ê¹Œì§€ ê¸°ë‹¤ë¦¬ëŠ” ì‹œê°„ì´ ìƒê¸´ë‹¤ == ê·¸ ë™ì•ˆ ìœ„ì— ìˆëŠ” ë¡œë”© ì´ë¯¸ì§€ê°€ ë™ì‘í•˜ê²Œ í•œë‹¤. â­â­
    async function getAPI() {
        try {
            // const data = await axios.get('http://127.0.0.1:8007/login/view' , {
            //     // withCredentials : ë¸Œë¼ìš°ì €ê°€ ì¿ í‚¤ë¥¼ ì„œë²„ë¡œ ì „ë‹¬ í•  ìˆ˜ ìˆëŠ” ì˜µì…˜
            //         // ì´ê±°ê°€ ì—†ìœ¼ë©´ > undefined ê°€ ë‚˜ì˜´ 
            //         // req.body ë¡œ ê°€ì ¸ì˜¤ì§€ ì•ŠìŒ
            //         withCredentials: true

            // })
            
            console.log("ì˜ ì‘ë™ë˜ëŠ” api ì¸ë°, ì´ ë¶€ë¶„ì´ ì›ë˜ ì˜ ì°íˆëŠ” ë¶€ë¶„ì¸ê°€ í…ŒìŠ¤íŠ¸ ğŸ“…ğŸ“…ğŸ“…ğŸ“…ğŸ“…ğŸ“…ğŸ“…ğŸ“…ğŸ“…ğŸ“… ")

            const {data} = await axios.get('http://127.0.0.1:8007/login/view' , {
                    withCredentials: true
                        // withCredentials ì—†ìœ¼ë©´ json ì•ˆ ì™€.
                // [í•´ì„]
                    // axios ê°€ http://127.0.0.1:8007/login/view ì—¬ê¸°ë¡œ get ìš”ì²­ì„ ë³´ë‚´ 
                    // ê·¸ëŸ¬ë©´ app.js ë¯¸ë“¤ì›¨ì–´ì— ì˜í•´ login routers í´ë”ë¡œ ê°„ë‹¤.
                    // login routers ê°€ ê°€ë¦¬í‚¤ëŠ” viewUser ìœ¼ë¡œ ê°„ë‹¤. 
                    // ê·¸ëŸ¬ë©´, json(data) ì´ë ‡ê²Œ, json í˜•ì‹ìœ¼ë¡œ ë°ì´í„°ë¥¼ ë³´ë‚¸ë‹¤. 
                    // ê·¸ëŸ¬ë©´, ê·¸ê±¸ main.html ì—ì„œ êµ¬ì¡°ë¶„í•´í• ë‹¹ìœ¼ë¡œ ë°›ëŠ”ë‹¤. 


                // http://127.0.0.1:8007/login/view ì—¬ê¸°ë¡œ ê°€ì„œ ë¼ìš°íŠ¸ë¡œ ê°€ê³  
                // http://127.0.0.1:8007/login/view ì—¬ê¸°ì—ì„œ 8007ì€ í¬íŠ¸ ë²ˆí˜¸
                // ë¼ì´ë¸Œ ì„œë²„ëŠ” 5000ë²ˆëŒ€ 
            });
    
            // ë¡œë”© gif ë¥¼ ëŒ ë•Œ > ë°ì´í„°ë¥¼ ê°€ì ¸ì™”ì„ ë•Œ, ëë‚´ì¤˜ì•¼ í•¨. â­â­â­â­â­ 
                // ë°ì´í„°ê°€ ë‹¤ ë“¤ì–´ì˜¤ë©´, ì‚¬ë¼ì§€ê²Œ  
                user_name.innerHTML = data.name
                user_age.innerHTML = data.age
                isLoading.classList.add("disable");
                // get ë‹¤ìŒì—” ìš”ì²­í•  ì„œë²„ì˜ ì£¼ì†Œë¥¼ ì ìŒ
                // í•„ìš”í•œ ê±´, data ê°€ í•„ìš”í•¨ 
                // console.log(data)q

                user_id.innerHTML = data.id



        } catch (error) {
            console.log(error)
            
        }
    }
    getAPI();

</script>


</html>